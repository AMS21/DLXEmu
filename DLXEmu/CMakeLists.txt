cmake_minimum_required(VERSION 3.10.2)

file(GLOB DLXEMULIB_SOURCES "src/CodeEditor.cpp" "src/DebugView.cpp" "src/Emulator.cpp" "src/MemoryViewer.cpp" "src/RegisterViewer.cpp" "src/Window.cpp")
file(GLOB DLXEMULIB_HEADERS "${CMAKE_CURRENT_BINARY_DIR}/Generated/DLXEmu/BuildInfo.hpp" "include/DLXEmu/CodeEditor.hpp" "include/DLXEmu/DebugView.hpp" "include/DLXEmu/Emulator.hpp" "include/DLXEmu/MemoryViewer.hpp" "include/DLXEmu/RegisterViewer.hpp" "include/DLXEmu/Window.hpp")

# DLXEmuLib
add_library("DLXEmuLib" STATIC ${DLXEMULIB_SOURCES} ${DLXEMULIB_HEADERS})

target_include_directories("DLXEmuLib" PUBLIC "include")

target_link_libraries("DLXEmuLib" PUBLIC DLXLib Phi::ProjectOptions ImGui
                                         ImGuiFilebrowser)

phi_enable_static_analyzers("DLXEmuLib")

# DLXEmu
add_executable("DLXEmu" "src/main.cpp")

target_link_libraries("DLXEmu" PRIVATE DLXEmuLib Phi::ProjectOptions)
phi_enable_static_analyzers("DLXEmu")

# Configure BuildInfo.hpp
set(CMAKE_AUTO_GENENERATED_WARNING "This file is automatically generated during CMake builds. DO NOT EDIT BY HAND!")
configure_file("src/BuildInfo.hpp.in" "${CMAKE_BINARY_DIR}/generated-includes/DLXEmu/generated/BuildInfo.hpp")
target_include_directories("DLXEmuLib" PUBLIC "${CMAKE_CURRENT_BINARY_DIR}/generated-includes")
